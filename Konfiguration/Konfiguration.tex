
%%\usepackage{listings}
%%\usepackage{chngcntr}


%\addtotoclist[float]{lol}
%\renewcommand*\listoflistings{\listoftoc[{\listoflistingscaption}]{lol}}

% Erlaube einfaches copy & paste aus der generierten pdf
\usepackage[T1]{fontenc}
% Erlaube überall underscore zu benutzen ohne \_ schreiben zu müssen
% https://tex.stackexchange.com/questions/20890/define-an-escape-underscore-environment 
\catcode`\_=12
\usepackage[utf8]{inputenc}

% Deutsche Bezeichnungen wie etwa "Inhaltsverzeichnis", statt "Contents"
% ngerman ist neue Rechtschreibung: https://tex.stackexchange.com/questions/67549/whats-the-difference-between-ngerman-and-german-in-babel
\usepackage[ngerman]{babel}

\babelhyphenation[ngerman]{Me-tho-de}



\usepackage{scrextend}
\addto\captionsenglish{\renewcommand{\bibname}{References}}

%\renewcaptionname{ngerman}{\contentsname}{Inhalt}           %Table of contents
%\renewcaptionname{ngerman}{\listfigurename}{Abbildungen}    %Figures
%\renewcaptionname{ngerman}{\listtablename}{Tabellen}        %Tables
%\renewcaptionname{ngerman}{\figurename}{Abb.}               %Figure
%\renewcaptionname{ngerman}{\tablename}{Tab.}                %Table
%\renewcaptionname{ngerman}{\bibname}{Literatur}             %Bibliography
  \newcaptionname{ngerman}{\listlistingname}{Listingverzeichnis} 
  %\renewcaptionname{ngerman}{\listingname}{Quelltext}      %Listing

% Deutsche Absätze
\parindent 0pt

\renewcommand{\baselinestretch}{1.25}


% Dieses Package ermöglich einfügen von Bildern mittels \includegraphics
\usepackage{graphicx}

% Zwinge Latex zum einfügen von bildern dort wo man sie im tex 
% Dokument hinterlegt mittels \begin{figure}[H]   
\usepackage{float}

% Ändere Highlight Color
\usepackage{xcolor}
\definecolor{insertedCode}{RGB}{190, 230, 190}
\definecolor{inlineCodeColor}{RGB}{244, 246, 248}
\definecolor{highPrioColor}{RGB}{255, 0, 0}
\definecolor{mediumPrioColor}{RGB}{0, 255, 255}

% Syntax Highlighting 
% newfloat macht, dass KOMA zusammen mit minted funktioniert und den Listings die Kapitelnummer voranstellt und sie gruppiert, so, wie auch mit den Abbildungen 
% newfloat macht auch, dass durch die Verwendung von KOMA nun Befehle wie  \renewcommand{\listoflistingscaption}{Listingverzeichnis} nicht mehr funktionieren
% umbennenen des List of Listings funktioniert dann anders:
% nämlich so: \newcaptionname{ngerman}{\listlistingname}{Listingverzeichnis} (https://tex.stackexchange.com/questions/82993/how-to-change-the-name-of-document-elements-like-figure-contents-bibliogr)
% Achtung wegen minted nicht lstlistlistingname sondern listlistingname
\usepackage[newfloat]{minted}
% Lösche rote Rahmen in minted Quelltext und nutze das Visual Studio Theme
\usemintedstyle{vs}
\ifIncludeFigures
  \setminted{autogobble=true, fontsize=\footnotesize, baselinestretch=1.0, mathescape, linenos, numbersep=8pt, breaklines, highlightcolor=insertedCode, breakafter=_@|.}
\fi
%\renewcommand{\listingscaption}{Code Snippet}
% Veringere Abstand zum Untertitel
%\AtEndEnvironment{listing}{\vspace{-14pt}} % <-
% Bei Syntaxfehler keine roten vierecke darum zeichnen
% https://tex.stackexchange.com/questions/343494/minted-red-box-around-greek-characters 

% rounded corners for minted listings
\usepackage[]{mdframed}
\BeforeBeginEnvironment{mintinline}{\begin{mdframed}}
    \AfterEndEnvironment{mintinline}{\end{mdframed}}

\usepackage{etoolbox}

% Kann das Weg? Habe ich im Anhang anders gelöst denke ich
\makeatletter
\AtBeginEnvironment{minted}{\dontdofcolorbox}
\def\dontdofcolorbox{\renewcommand\fcolorbox[4][]{##4}}
\makeatother



\usepackage[autostyle,german=quotes]{csquotes}

% Für Hintergrundbilder mittels \AddToShipoutPicture
\usepackage{eso-pic}

% Bilder transparent machen
\usepackage{transparent}

% Fallunterscheidungen wie etwa gerade und ungerade Seiten
\usepackage{ifthen}

% Einfügen von Tabellen
\usepackage{tabularx}

% Literaturverzeichnisse verwenden
% backref=true -- referenziert von Literaturverzeichnis zurück auf die Seite wo zitiert wurde
%\usepackage[style=authortitle, natbib, backend=biber, backref=true]{biblatex}
\usepackage[%
  style=authortitle, % sorgt dafür dass in der Fußnote der Autor und dann der Titel gelistet wird, welches hiervon aber?
  natbib, % sorgt dafür dass in der Fußnote der Autor und dann der Titel gelistet wird, welches hiervon aber?
  backref=true % sorgt dafür dass in der Fußnote der Autor und dann der Titel gelistet wird, welches hiervon aber?
  backend=bibtex8, % KOMA benutzt bibtex8 statt biber
]{biblatex}
% Nummer der Zitation nicht hochgestellt, sondern sondern mit
% normaler Textgröße und einem Punkt nach der Nummer
% Beispiel: 1. Teller,”Visibility computations in densely occluded polyhedral environments.“, S. 19
\makeatletter% 
\long\def\@makefntext#1{% 
  \parindent 1em\noindent \hb@xt@ 1.8em{\hss  \hbox {{\normalfont \@thefnmark }}. }#1}%
\makeatother

% Texte für die zurückreferenzierung definieren
\DefineBibliographyStrings{german}{%
  backrefpage = {Zitiert auf der Seite},% originally "cited on page"
  backrefpages = {Zitiert auf den Seiten},% originally "cited on pages"
}



% Referezieren von Kapiteln mit ihrem Titel
\usepackage{nameref}

% Einfügen von PDFs
\usepackage{pdfpages}

% Seitenränder
\ifInfinitePaperLength
\usepackage[paperwidth=500cm,paperheight=21cm,margin=1in]{geometry}
\else
\usepackage{geometry}
\geometry{a4paper, top=20mm, inner=40mm, outer=20mm, bottom=20mm, headsep=12mm, footskip=12mm}
\fi




% Absatzformat
%\parskip2ex		% Absatzabsstand	
%\parindent0ex		% Absatzeinzug

% Package zum hinzufügen eines Glossars
\usepackage{glossaries}
\setacronymstyle{long-short}
\newacronym{eler}{ELER}{Europäischer Landwirtschaftsfond für die Entwicklung des ländlichen Raum}


% Abbildungsunterschrift anpassen
% https://tex.stackexchange.com/questions/86120/font-size-of-figure-caption-header/86121
\usepackage[font=footnotesize,labelfont=bf]{caption}
% Abstand anpassen
% https://tex.stackexchange.com/questions/45990/how-can-i-modify-vertical-space-between-figure-and-caption
\setlength{\abovecaptionskip}{10pt plus 3pt minus 2pt}

% Nutze unterschiedliche fußnoten (1,2,3 und a,b,c)
\usepackage[para]{manyfoot}
% \footnoteL{https://google.com}
\DeclareNewFootnote{L}[Roman]
% \footnoteI{https://google.com}
\DeclareNewFootnote{I}[alph]

% fußnoten nacheinander mit Kommas
% \footnote{Einz}\footnote{Zwei}
\usepackage[multiple]{footmisc}



% https://tex.stackexchange.com/questions/50654/how-to-allow-line-breaks-after-forward-slashes-in-context?rq=1
% enables a break point after /, +, (, ) and -
% use hyphens option to break url
\usepackage{url}
% \def\UrlBreaks{%
%   \do\/%
%   %\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j\do\k\do\l%
%   %   \do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w\do\x\do\y\do\z%
%   %\do\A\do\B\do\C\do\D\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L%
%   %   \do\M\do\N\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X\do\Y\do\Z%
%  \do\*\do\-\do\~\do\'\do\"\do\-\do\\%
%  \do\_
%  \do\l
%  \do\n
%  \do0\do1\do2\do3\do4\do5\do6\do7\do8\do9\do=\do/\do.\do:%
% }

\usepackage{xurl}

% Links mit Sprungmarken
% hyperref muss nach \usepackage[hyphens]{url} kommen, sonst gibt es einen Option clash, denn hyperref läd url ohne hyphens option
% https://tex.stackexchange.com/questions/50654/how-to-allow-line-breaks-after-forward-slashes-in-context?rq=1
\usepackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=black, % Setz die Farbe von Links im 
  % Inhaltsverzeichnis zurück auf schwarz
  citecolor=black, % Farbe von Literaturlinks = schwarz
  urlcolor=blue    % Farbe von URLs = blau     
}

% Auf gleiche footnote erneut verweisen mit cleveref
% Achtung: Wenn cleveref nicht zum ende geladen wird gibt es evtl. die Fehlermeldung: Package cleveref Error: cleveref must be loaded after amsmath!.
\usepackage{cleveref}
% Auf erneut verweisen
\crefformat{footnote}{#2\footnotemark[#1]#3}


% Installation manuell: 
% Download: https://perso.ensta-paris.fr/~kielbasi/tikzuml/index.php?lang=en&id=download
% Kopieren nach texlive\texlive\2021\texmf-dist\tex\latex
% texhash ausführen
% uml diagramme mit tikz
\ifIncludeFigures
\usepackage{tikz-uml}
\fi

% Blindtext einfügen
\usepackage{blindtext}

% hintergrund für listings (auch inline)

\usepackage{tcolorbox}

\xdefinecolor{inlineCodetXColor}{RGB}{244,246,248}

\newtcbox{\inlineCodetcbox}[1][inlineCodetXColor]{on line,
  arc=1pt,colback=inlineCodetXColor,colframe=inlineCodetXColor,
  before upper={\rule[-3pt]{0pt}{10pt}},boxrule=0pt,
  boxsep=0pt,left=2pt,right=2pt,top=2pt,bottom=0pt}

\newtcolorbox{codeFrame}{colback=inlineCodetXColor,
  colframe=inlineCodetXColor,on line,arc=4pt,boxrule=0pt,boxsep=0pt,left=4pt,right=4pt,top=4pt,bottom=4pt}

\BeforeBeginEnvironment{minted}{\begin{codeFrame}}
    \AfterEndEnvironment{minted}{\end{codeFrame}}

\newcommand{\alexlistingcaption}[3]{\caption[#2]{#2\ifIncludeFigures, Quelle: Eigenes Listing, Datei: \url{#3}\fi}}


% Code Snippet -> Listing
%\renewcommand{\listingscaption}{Listing}
% Eigener Befehl für Listings
\newenvironment{alexlisting}[4]
{%
  \begin{listing}[ht]%
    \ifIncludeFigures
    \begin{codeFrame}
        \inputminted[#4]{dart}{#3}%
    \end{codeFrame}
    \fi
    %\vspace{-18pt}
    \alexlistingcaption{#1}{#2}{#3}%
    }%
    {%
  \end{listing}%
}


\newenvironment{alexyamllisting}[4]
{%
  \begin{listing}[ht]%
    \ifIncludeFigures

    \begin{codeFrame}
        \inputminted[#4]{yaml}{#3}%
    \end{codeFrame}
    \fi

    %\vspace{-18pt}
    \alexlistingcaption{#1}{#2}{#3}%

    }%
    {%
  \end{listing}%
}

\newcommand{\fremdeslistingcaption}[4]{\caption[#1 #2]{#2, Quelle: #4, Datei: \url{#3}}}
% Eigener Befehl für fremde Listings
\newenvironment{fremdeslisting}[6]
{%
    \begin{listing}[ht]%
      \ifIncludeFigures
      \begin{codeFrame}

      \inputminted[#4]{#6}{#3}%

    \end{codeFrame}
    \fi
      %\vspace{-18pt}

      \ifIncludeFigures
      \fremdeslistingcaption{#1}{#2}{#3}{#5}%
      \else
      \caption[#1]{#2}
      \fi
            }%
      {%
    \end{listing}%
}

% Eigener Befehl für Bilder
\newenvironment{alexfigure}[4]
{%
    \begin{figure}[ht]
      \centering
      %\ifIncludeFigures
      \includegraphics[width=1.0\textwidth]{#1}
      %\fi

      \ifIncludeFigures
      \caption[#2]{#3, Quelle: Eigene Abbildung}
      \else
      \caption[#2]{#3}
      \fi

      }%
      {%
    \end{figure}%
}

% Eigener Befehl für Bilder
\newenvironment{alexfigurewithnotebook}[5]
{%
    \begin{figure}[ht]
      \centering
      \ifIncludeFigures
      \includegraphics[width=1.0\textwidth]{#1}
      \fi
      \caption[#2]{#3, Quelle: Eigene Abbildung, Notebook:\url{#4}, Daten-Quelle:#5}
      }%
      {%
    \end{figure}
}


% Eigener Befehl für Abbbildungsreferenz
\newcommand{\Abb}[1]{%
\ifForDuden%
%
\else%
(Abb. #1)%
\fi%
}

% Eigener Befehl für Abbbildungsreferenz mit Seite
\newcommand{\AbbS}[1]{%
\ifForDuden%
%
\else%
(Abb. \ref{#1}, S. \pageref{#1})%
\fi%
}

% Eigener Befehl für Listingreferenz
\newcommand{\Lst}[1]{%
\ifForDuden%
%
\else%
(Listing #1)%
\fi%
}

% Eigener Befehl für Zeilenreferenz
\newcommand{\Z}[1]{%
\ifIncludeLineNumbers%
(Z. #1)%
\else%
\fi%
}
% Eigener Befehl für Listingreferenz mit Zeilenreferenz
\newcommand{\LstZ}[2]{%
\ifForDuden%
%
\else%
(Listing #1, Z. #2)%
\fi%
}

% Eigener Befehl für Listingreferenz mit Zeilenreferenz
\newcommand{\LstSZ}[2]{%
\ifForDuden%
%
\else%
(Listing \ref{#1}, S. \pageref{#1}, Z. #2)%
\fi%
}

\newcommand{\LstS}[1]{%
\ifForDuden%
%
\else%
(Listing \ref{#1}, S. \pageref{#1})%
\fi%
}

\ifForDuden%
\renewcommand{\footcite}{}%
\else%
\fi%



% Eigener Befehl für inline Code

\newcommand{\IC}[1]{%
\ifDingsInsteadOfInlineCode%
Dings%
\else%
\inlineCodetcbox{\mintinline[breaklines, breakafter=_/.]{dart}{#1}}%
\fi%
}
\newcommand{\C}[1]{\mintinline{dart}{#1}}

\newcommand{\HP}[1]{\mintinline[breaklines, breakafter=_/.,bgcolor=highPrioColor]{dart}{#1}}
\newcommand{\MP}[1]{\mintinline[breaklines, breakafter=_/.,bgcolor=mediumPrioColor]{dart}{#1}}




\newcommand{\DartSpec}[1]{%
\ifForDuden%
%
\else%
\footcite[Vgl.][S. #1]{DartProgrammingLanguageSpecification5thedition}%
\fi%
}
\newcommand{\JavaSpec}[1]{%
\ifForDuden%
%
\else%
\footcite[Vgl.][S. #1]{TheJavaLanguageSpecificationJavaSE16Edition}%
\fi%
}
% Abstand zwischen itemize Punkten verringern
% https://stackoverflow.com/questions/2180567/change-parskip-only-inside-enumerate-itemize-environment

% Package inputenc: Unicode char ³ (U+B3) (inputenc)	not set up for use with LaTeX.
% https://tex.stackexchange.com/questions/83440/inputenc-error-unicode-char-u8-not-set-up-for-use-with-latex
\DeclareUnicodeCharacter{00A0}{ }
% https://tex.stackexchange.com/questions/435302/unicode-character-error-inputenc-package
\DeclareUnicodeCharacter{00B3}{\textsuperscript{3}}

% enquote wird auch immer kursiv gesetzt
\let\oldenquote\enquote
% \renewcommand{\enquote}[1]{\textit{\oldenquote{#1}}} % <--  mit Anfügrungsstrichen
\renewcommand{\enquote}[1]{%
\ifDingsInsteadOfEnqoute%
Dings%
\else%
\textit{#1}%
\fi%
}



% Anleitung zum Styling vom Kapitel Titel
% https://tex.stackexchange.com/questions/50448/how-to-place-the-chapter-number-behind-the-chapter-title-in-koma-script


% roman numbering
\renewcommand{\thepart}{\Roman{part}}
% remove dot after number
\renewcommand{\partformat}{\partname~\thepart}
% font for "Part X"
\setkomafont{partnumber}{\normalsize\rmfamily}
% font for part title
\definecolor{flutterDarkBlue}{RGB}{7, 89, 157}
\setkomafont{part}{\huge\rmfamily\color{flutterDarkBlue}\textsc}

% Multiple Choice boxes https://tex.stackexchange.com/questions/81938/multiple-choice-with-answers-at-the-end-of-the-chapter
\usepackage{enumitem,amssymb}


% pdf kommentare
\usepackage[author={Alexander Johr}]{pdfcomment}

% Tabellen, mit span
\usepackage{multirow,tabularx}
% Eigene Spalte
\newcolumntype{Y}{>{\centering\arraybackslash}X}
\renewcommand{\arraystretch}{1.5}

\usepackage{tabu}
\usepackage{longtable}
\usepackage{makecell}
\usepackage{multirow}


\ifIncludeFigures

\else
  \renewcommand{\cleardoublepage}{}
  \renewcommand{\clearpage}{}
\fi

\usepackage[all]{nowidow}


\usepackage{dirtytalk}
